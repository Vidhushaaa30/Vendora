<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Times+New+Roman:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            background: linear-gradient(-45deg, #16425b, #274c77, #6096ba, #a3cef1);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container-bg {
            background-color: #e7ecef;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1.5rem;
            max-width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .profile-button {
            transition: all 0.3s ease-in-out;
        }

        .profile-button:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* New: Pulsing animation for the main profile icon */
        .profile-icon {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* New: Hover effects for the button text */
        .profile-button h2 {
            transition: transform 0.3s ease-in-out;
        }
        .profile-button:hover h2 {
            transform: scale(1.05);
        }

        /* New: Rotating animation for the logout icon on hover */
        .logout-icon {
            transition: transform 0.3s ease-in-out;
        }
        .profile-button:hover .logout-icon {
            transform: rotate(360deg) scale(1.2);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-6">

    <div class="container-bg p-10 rounded-3xl shadow-2xl max-w-lg w-full transform transition-transform duration-300 hover:scale-105">
        <h1 class="text-5xl font-extrabold mb-10 flex items-center justify-center" style="font-size: 44px; color: #16425b;">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 mr-4 profile-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            PROFILE
        </h1>
        
        <div class="space-y-8">
            <button onclick="showDetails('name')" class="profile-button w-full text-left p-6 bg-[#3a7ca5] text-white hover:bg-[#81c3d7] transition-all duration-300 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold">NAME</h2>
            </button>
            <button onclick="showDetails('employeeId')" class="profile-button w-full text-left p-6 bg-[#3a7ca5] text-white hover:bg-[#81c3d7] transition-all duration-300 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold">EMPLOYEE ID</h2>
            </button>
            <button onclick="showDetails('contactNumber')" class="profile-button w-full text-left p-6 bg-[#3a7ca5] text-white hover:bg-[#81c3d7] transition-all duration-300 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold">CONTACT NUMBER</h2>
            </button>
            <button onclick="showDetails('email')" class="profile-button w-full text-left p-6 bg-[#3a7ca5] text-white hover:bg-[#81c3d7] transition-all duration-300 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold">EMAIL</h2>
            </button>
        </div>

        <button onclick="signOut()" class="profile-button mt-8 w-full text-left p-6 flex items-center justify-center bg-[#16425b] text-white hover:bg-[#81c3d7] transition-all duration-300 rounded-2xl shadow-lg font-bold text-2xl">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 logout-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17 7l-1.41 1.41L18.17 11H9v2h9.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
            </svg>
            LOGOUT
        </button>
    </div>

    <div id="details-overlay" class="overlay">
        <div class="popup transform scale-95 transition-all duration-300">
            <h3 id="popup-title" class="text-3xl font-bold mb-4 text-[#16425b]"></h3>
            <p id="popup-content" class="text-lg text-[#16425b]"></p>
            <button onclick="hideDetails()" class="mt-8 px-8 py-3 bg-[#16425b] text-white rounded-full hover:bg-opacity-80 transition-colors duration-200 shadow-md">Close</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAA-0m6frTwFh712zJOQv2CcblX-7o6G9Q",
            authDomain: "vendora-9c567.firebaseapp.com",
            projectId: "vendora-9c567",
            storageBucket: "vendora-9c567.firebasestorage.app",
            messagingSenderId: "278942178451",
            appId: "1:278942178451:web:cc16ba00fc671058178166",
            measurementId: "G-Z59E9PHSYL"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = app.auth();
        const db = app.firestore();
        
        let profileData = null;

        // Function to fetch profile data from Firebase
        async function fetchAndDisplayProfile() {
            try {
                // Assuming a single user profile document exists, for example with a fixed ID
                const docRef = db.collection("users").doc("user-01"); 
                const doc = await docRef.get();

                if (doc.exists) {
                    profileData = doc.data();
                    console.log("Profile data fetched:", profileData);
                } else {
                    console.log("No such document!");
                    profileData = {
                        name: "N/A",
                        employeeId: "N/A",
                        contactNumber: "N/A",
                        email: "N/A"
                    };
                }
            } catch (error) {
                console.error("Error fetching document:", error);
                profileData = {
                    name: "Error",
                    employeeId: "Error",
                    contactNumber: "Error",
                    email: "Error"
                };
            }
        }

        // Function to show the popup with details
        function showDetails(detailType) {
            if (!profileData) {
                alert("Profile data not loaded. Please try again or sign in.");
                return;
            }

            const data = {
                name: {
                    title: "Full Name",
                    content: profileData.name
                },
                employeeId: {
                    title: "Employee ID",
                    content: profileData.empid
                },
                contactNumber: {
                    title: "Contact Number",
                    content: profileData.contactnumber
                },
                email: {
                    title: "Email Address",
                    content: profileData.email
                }
            };

            const detail = data[detailType];
            if (detail) {
                document.getElementById('popup-title').textContent = detail.title;
                document.getElementById('popup-content').textContent = detail.content;
                const overlay = document.getElementById('details-overlay');
                overlay.style.display = 'flex';
                // Trigger transition effect
                setTimeout(() => {
                    overlay.querySelector('.popup').classList.remove('scale-95');
                    overlay.querySelector('.popup').classList.add('scale-100');
                }, 10);
            }
        }

        // Function to hide the popup
        function hideDetails() {
            const overlay = document.getElementById('details-overlay');
            // Trigger transition effect
            overlay.querySelector('.popup').classList.remove('scale-100');
            overlay.querySelector('.popup').classList.add('scale-95');
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 300); // Match transition duration
        }

        // Function for logging out
        async function signOut() {
            try {
                await auth.signOut();
                alert("You have been signed out.");
                // Redirect or update UI as needed
            } catch (error) {
                console.error("Sign out error:", error);
            }
        }

        // Fetch data when the page loads
        window.onload = fetchAndDisplayProfile;
    </script>
</body>
</html>